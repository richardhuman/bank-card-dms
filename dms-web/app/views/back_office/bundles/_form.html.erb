<%= form_with(model: [:back_office, bundle]) do |form| %>
<!--    data: { controller: "flash-notice", action: "turbo:submit-end->flash-notice#startClose" }-->
    <%= render "/shared/form_errors", active_model_object: bundle %>

    <div>
        <%= form.label :bundle_number %>
        <%= form.text_field :bundle_number, placeholder: t("activerecord.attributes.bundle.bundle_number") %>
    </div>

    <div>
        <%= form.label :card_quantity %>
        <%= form.text_field :card_quantity, placeholder: t("activerecord.attributes.bundle.card_quantity") %>
    </div>

    <div>
        <%= form.label :current_assignee %>
        <%= form.collection_select :current_assignee_id, @agents, :id, :full_name_with_identifier,
                                   { include_blank: true  } %>
    </div>

    <div>
        <%= form.label :parent_bundle %>
        <%= form.collection_select :parent_bundle_id, @available_parent_bundles, :id, :bundle_number,
                                   { include_blank: true }  %>
    </div>

    <div class="form-actions">
        <%= link_to t("forms.shared.actions.cancel"), back_office_bundles_path,
                    class: "button",
                    data: { confirm: t("forms.shared.actions.confirm_cancel") }%>
        <%= form.submit bundle.id ?
                                t("forms.bundle.actions.update") :
                                t("forms.bundle.actions.create"),
                        { class: "button-primary" } %>
    </div>

    <% if bundle.id %>
        <div class="form-actions danger">
            <%= link_to t("forms.bundle.actions.delete"), [:back_office, bundle], method: :delete,
                        data: { confirm: t("forms.shared.actions.confirm_delete")}, class: "button button-danger"  %>
        </div>
    <% end %>

<% end %>
